(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))o(a);new MutationObserver(a=>{for(const n of a)if(n.type==="childList")for(const l of n.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&o(l)}).observe(document,{childList:!0,subtree:!0});function r(a){const n={};return a.integrity&&(n.integrity=a.integrity),a.referrerpolicy&&(n.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?n.credentials="include":a.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function o(a){if(a.ep)return;a.ep=!0;const n=r(a);fetch(a.href,n)}})();var N=function(){var t=document.getSelection();if(!t.rangeCount)return function(){};for(var e=document.activeElement,r=[],o=0;o<t.rangeCount;o++)r.push(t.getRangeAt(o));switch(e.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":e.blur();break;default:e=null;break}return t.removeAllRanges(),function(){t.type==="Caret"&&t.removeAllRanges(),t.rangeCount||r.forEach(function(a){t.addRange(a)}),e&&e.focus()}},q=N,k={"text/plain":"Text","text/html":"Url",default:"Text"},z="Copy to clipboard: #{key}, Enter";function j(t){var e=(/mac os x/i.test(navigator.userAgent)?"\u2318":"Ctrl")+"+C";return t.replace(/#{\s*key\s*}/g,e)}function G(t,e){var r,o,a,n,l,c,u=!1;e||(e={}),r=e.debug||!1;try{a=q(),n=document.createRange(),l=document.getSelection(),c=document.createElement("span"),c.textContent=t,c.ariaHidden="true",c.style.all="unset",c.style.position="fixed",c.style.top=0,c.style.clip="rect(0, 0, 0, 0)",c.style.whiteSpace="pre",c.style.webkitUserSelect="text",c.style.MozUserSelect="text",c.style.msUserSelect="text",c.style.userSelect="text",c.addEventListener("copy",function(i){if(i.stopPropagation(),e.format)if(i.preventDefault(),typeof i.clipboardData>"u"){r&&console.warn("unable to use e.clipboardData"),r&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var E=k[e.format]||k.default;window.clipboardData.setData(E,t)}else i.clipboardData.clearData(),i.clipboardData.setData(e.format,t);e.onCopy&&(i.preventDefault(),e.onCopy(i.clipboardData))}),document.body.appendChild(c),n.selectNodeContents(c),l.addRange(n);var v=document.execCommand("copy");if(!v)throw new Error("copy command was unsuccessful");u=!0}catch(i){r&&console.error("unable to copy using execCommand: ",i),r&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(e.format||"text",t),e.onCopy&&e.onCopy(window.clipboardData),u=!0}catch(E){r&&console.error("unable to copy using clipboardData: ",E),r&&console.error("falling back to prompt"),o=j("message"in e?e.message:z),window.prompt(o,t)}}finally{l&&(typeof l.removeRange=="function"?l.removeRange(n):l.removeAllRanges()),c&&document.body.removeChild(c),a()}return u}var K=G;const s=document.getElementById("image"),b=document.getElementById("canvas"),m=document.getElementById("offscreen"),y=document.getElementById("file"),g=document.getElementById("shadow-image"),R=document.getElementById("precision"),A=document.getElementById("shadow-gap"),M=document.getElementById("shadow-radius"),O=document.getElementById("drop-transparent"),T=document.getElementById("drop-white"),$=document.getElementById("drop-alpha"),X=document.getElementById("export"),h=b.getContext("2d"),F=m.getContext("2d");let U,p=640,d=50,x=0,w=0,I=!0,D=!1,C=!1;R.value=d+"";A.value=x+"";M.value=w+"";O.checked=I;T.checked=C;$.checked=D;var S;(S=document.getElementById("initial"))==null||S.addEventListener("click",()=>{y.click()});var L;(L=document.querySelector(".card-image"))==null||L.addEventListener("click",()=>{y.click()});var B;(B=document.querySelector("#import"))==null||B.addEventListener("click",()=>{y.click()});y.addEventListener("change",t=>{const e=t.target.files;!(e!=null&&e.length)||(U=e[0],document.getElementById("initial").style.display="none",document.getElementById("app").style.display="flex",P())});R.addEventListener("change",t=>{d=+t.target.value,P()});A.addEventListener("change",t=>{x=+t.target.value,f()});M.addEventListener("change",t=>{w=+t.target.value,f()});O.addEventListener("change",t=>{I=t.target.checked,f()});T.addEventListener("change",t=>{C=t.target.checked,f()});$.addEventListener("change",t=>{D=t.target.checked,f()});const H=()=>{let t,e;return[new Promise((o,a)=>{t=o,e=a}),t,e]},J=t=>{const[e,r,o]=H(),a=new FileReader;return a.addEventListener("loadend",n=>{var l;(l=n.target)!=null&&l.result?r(n.target.result):o(new Error("Read file fail"))}),a.addEventListener("error",n=>{o(n)}),a.readAsDataURL(t),e},Q=(t,e)=>{const[r,o,a]=H(),n=e!=null?e:new Image;return n.src=t,n.onload=()=>{o(n)},n.onerror=l=>{a(l)},r},P=async()=>{const t=await J(U);await Q(t,s);const e=s.naturalHeight/s.naturalWidth;m.width=d,m.height=Math.round(d*e),b.width=p=Math.min(640,s.naturalHeight),b.height=p*e,F.drawImage(s,0,0,m.width,m.height),document.querySelectorAll(".size-wrap").forEach(r=>{const o=r.style;o.width=s.naturalWidth+"px",o.height=s.naturalHeight+"px"}),h.imageSmoothingEnabled=h.mozImageSmoothingEnabled=h.webkitImageSmoothingEnabled=h.msImageSmoothingEnabled=!1,h.drawImage(m,0,0,p,p*e),f()},f=()=>{const t=s.naturalHeight/s.naturalWidth,e=p/d|0;g.style.height=g.style.width=Math.max(e-x,1)+"px";const r=W(e);g.style.boxShadow=r||"none",g.parentElement.style.height=e*d*t+"px",g.parentElement.style.width=e*d+"px",g.style.borderRadius=w+"%"};function V(t,e,r){if(t>255||e>255||r>255)throw"Invalid color component";return(t<<16|e<<8|r).toString(16)}const W=t=>{const e=[],r=s.naturalHeight/s.naturalWidth;for(let o=0;o<d*r;o++)for(let a=0;a<d;a++){const n=F.getImageData(a,o,1,1).data;if(I&&n[3]===0||C&&n[3]!==0&&n[0]===255&&n[1]===255&&n[2]===255)continue;const l=[...n];l.length=4;const c=D?"#"+("000000"+V(n[0],n[1],n[2])).slice(-6):`rgba(${l.map((u,v)=>v===3?(u/255).toFixed(3):u).join(",")})`;e.push(`${c} ${a*t}px ${o*t}px`+(o===0&&a===0?` 0 ${t}px inset`:""))}return e.join(",")};X.addEventListener("click",()=>{const t=p/d|0,e=W(t);K(`
.pixel {
    box-shadow: ${e};
    width: ${t}px;
    height: ${t}px;
    border-radius: ${w}%;
}
`),alert("\u5DF2\u590D\u5236\u5230\u526A\u5207\u677F")});
