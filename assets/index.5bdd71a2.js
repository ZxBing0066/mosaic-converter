(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))a(o);new MutationObserver(o=>{for(const n of o)if(n.type==="childList")for(const l of n.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&a(l)}).observe(document,{childList:!0,subtree:!0});function r(o){const n={};return o.integrity&&(n.integrity=o.integrity),o.referrerpolicy&&(n.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?n.credentials="include":o.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function a(o){if(o.ep)return;o.ep=!0;const n=r(o);fetch(o.href,n)}})();var N=function(){var t=document.getSelection();if(!t.rangeCount)return function(){};for(var e=document.activeElement,r=[],a=0;a<t.rangeCount;a++)r.push(t.getRangeAt(a));switch(e.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":e.blur();break;default:e=null;break}return t.removeAllRanges(),function(){t.type==="Caret"&&t.removeAllRanges(),t.rangeCount||r.forEach(function(o){t.addRange(o)}),e&&e.focus()}},q=N,S={"text/plain":"Text","text/html":"Url",default:"Text"},z="Copy to clipboard: #{key}, Enter";function j(t){var e=(/mac os x/i.test(navigator.userAgent)?"\u2318":"Ctrl")+"+C";return t.replace(/#{\s*key\s*}/g,e)}function G(t,e){var r,a,o,n,l,c,g=!1;e||(e={}),r=e.debug||!1;try{o=q(),n=document.createRange(),l=document.getSelection(),c=document.createElement("span"),c.textContent=t,c.ariaHidden="true",c.style.all="unset",c.style.position="fixed",c.style.top=0,c.style.clip="rect(0, 0, 0, 0)",c.style.whiteSpace="pre",c.style.webkitUserSelect="text",c.style.MozUserSelect="text",c.style.msUserSelect="text",c.style.userSelect="text",c.addEventListener("copy",function(i){if(i.stopPropagation(),e.format)if(i.preventDefault(),typeof i.clipboardData>"u"){r&&console.warn("unable to use e.clipboardData"),r&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var E=S[e.format]||S.default;window.clipboardData.setData(E,t)}else i.clipboardData.clearData(),i.clipboardData.setData(e.format,t);e.onCopy&&(i.preventDefault(),e.onCopy(i.clipboardData))}),document.body.appendChild(c),n.selectNodeContents(c),l.addRange(n);var v=document.execCommand("copy");if(!v)throw new Error("copy command was unsuccessful");g=!0}catch(i){r&&console.error("unable to copy using execCommand: ",i),r&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(e.format||"text",t),e.onCopy&&e.onCopy(window.clipboardData),g=!0}catch(E){r&&console.error("unable to copy using clipboardData: ",E),r&&console.error("falling back to prompt"),a=j("message"in e?e.message:z),window.prompt(a,t)}}finally{l&&(typeof l.removeRange=="function"?l.removeRange(n):l.removeAllRanges()),c&&document.body.removeChild(c),o()}return g}var K=G;const s=document.getElementById("image"),b=document.getElementById("canvas"),p=document.getElementById("offscreen"),y=document.getElementById("file"),m=document.getElementById("shadow-image"),A=document.getElementById("precision"),M=document.getElementById("shadow-gap"),O=document.getElementById("shadow-radius"),T=document.getElementById("drop-transparent"),$=document.getElementById("drop-white"),F=document.getElementById("drop-alpha"),X=document.getElementById("export"),h=b.getContext("2d"),U=p.getContext("2d");let W,u=640,d=50,x=0,w=0,I=!0,D=!1,C=!1;A.value=d+"";M.value=x+"";O.value=w+"";T.checked=I;$.checked=C;F.checked=D;var L;(L=document.getElementById("initial"))==null||L.addEventListener("click",()=>{y.click()});var B;(B=document.querySelector(".card-image"))==null||B.addEventListener("click",()=>{y.click()});var R;(R=document.querySelector("#import"))==null||R.addEventListener("click",()=>{y.click()});const J=new ResizeObserver(t=>{console.log(t),k()});J.observe(s);y.addEventListener("change",t=>{const e=t.target.files;!(e!=null&&e.length)||(W=e[0],document.getElementById("initial").style.display="none",document.getElementById("app").style.display="flex",k())});A.addEventListener("change",t=>{d=+t.target.value,k()});M.addEventListener("change",t=>{x=+t.target.value,f()});O.addEventListener("change",t=>{w=+t.target.value,f()});T.addEventListener("change",t=>{I=t.target.checked,f()});$.addEventListener("change",t=>{C=t.target.checked,f()});F.addEventListener("change",t=>{D=t.target.checked,f()});const P=()=>{let t,e;return[new Promise((a,o)=>{t=a,e=o}),t,e]},Q=t=>{const[e,r,a]=P(),o=new FileReader;return o.addEventListener("loadend",n=>{var l;(l=n.target)!=null&&l.result?r(n.target.result):a(new Error("Read file fail"))}),o.addEventListener("error",n=>{a(n)}),o.readAsDataURL(t),e},V=(t,e)=>{const[r,a,o]=P(),n=e!=null?e:new Image;return n.src=t,n.onload=()=>{a(n)},n.onerror=l=>{o(l)},r},k=async()=>{const t=await Q(W);await V(t,s);const e=s.naturalHeight/s.naturalWidth;p.width=d,p.height=Math.round(d*e),console.log(s.clientHeight),b.width=u=Math.min(640,s.naturalWidth,s.clientWidth),b.height=u*e,U.drawImage(s,0,0,p.width,p.height),document.querySelectorAll(".size-wrap").forEach(r=>{const a=r.style;a.width=u+"px",a.height=u*e+"px"}),h.imageSmoothingEnabled=h.mozImageSmoothingEnabled=h.webkitImageSmoothingEnabled=h.msImageSmoothingEnabled=!1,h.drawImage(p,0,0,u,u*e),f()},f=()=>{const t=s.naturalHeight/s.naturalWidth,e=u/d|0;m.style.height=m.style.width=Math.max(e-x,1)+"px";const r=H(e);m.style.boxShadow=r||"none",m.parentElement.style.height=e*d*t+"px",m.parentElement.style.width=e*d+"px",m.style.borderRadius=w+"%"};function Y(t,e,r){if(t>255||e>255||r>255)throw"Invalid color component";return(t<<16|e<<8|r).toString(16)}const H=t=>{const e=[],r=s.naturalHeight/s.naturalWidth;for(let a=0;a<d*r;a++)for(let o=0;o<d;o++){const n=U.getImageData(o,a,1,1).data;if(I&&n[3]===0||C&&n[3]!==0&&n[0]===255&&n[1]===255&&n[2]===255)continue;const l=[...n];l.length=4;const c=D?"#"+("000000"+Y(n[0],n[1],n[2])).slice(-6):`rgba(${l.map((g,v)=>v===3?(g/255).toFixed(3):g).join(",")})`;e.push(`${c} ${o*t}px ${a*t}px`+(a===0&&o===0?` 0 ${t}px inset`:""))}return e.join(",")};X.addEventListener("click",()=>{const t=u/d|0,e=H(t);K(`
.pixel {
    box-shadow: ${e};
    width: ${t}px;
    height: ${t}px;
    border-radius: ${w}%;
}
`),alert("\u5DF2\u590D\u5236\u5230\u526A\u5207\u677F")});
