(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const n of a)if(n.type==="childList")for(const s of n.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function o(a){const n={};return a.integrity&&(n.integrity=a.integrity),a.referrerpolicy&&(n.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?n.credentials="include":a.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function r(a){if(a.ep)return;a.ep=!0;const n=o(a);fetch(a.href,n)}})();var P=function(){var t=document.getSelection();if(!t.rangeCount)return function(){};for(var e=document.activeElement,o=[],r=0;r<t.rangeCount;r++)o.push(t.getRangeAt(r));switch(e.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":e.blur();break;default:e=null;break}return t.removeAllRanges(),function(){t.type==="Caret"&&t.removeAllRanges(),t.rangeCount||o.forEach(function(a){t.addRange(a)}),e&&e.focus()}},W=P,k={"text/plain":"Text","text/html":"Url",default:"Text"},j="Copy to clipboard: #{key}, Enter";function q(t){var e=(/mac os x/i.test(navigator.userAgent)?"\u2318":"Ctrl")+"+C";return t.replace(/#{\s*key\s*}/g,e)}function z(t,e){var o,r,a,n,s,c,u=!1;e||(e={}),o=e.debug||!1;try{a=W(),n=document.createRange(),s=document.getSelection(),c=document.createElement("span"),c.textContent=t,c.ariaHidden="true",c.style.all="unset",c.style.position="fixed",c.style.top=0,c.style.clip="rect(0, 0, 0, 0)",c.style.whiteSpace="pre",c.style.webkitUserSelect="text",c.style.MozUserSelect="text",c.style.msUserSelect="text",c.style.userSelect="text",c.addEventListener("copy",function(d){if(d.stopPropagation(),e.format)if(d.preventDefault(),typeof d.clipboardData>"u"){o&&console.warn("unable to use e.clipboardData"),o&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var v=k[e.format]||k.default;window.clipboardData.setData(v,t)}else d.clipboardData.clearData(),d.clipboardData.setData(e.format,t);e.onCopy&&(d.preventDefault(),e.onCopy(d.clipboardData))}),document.body.appendChild(c),n.selectNodeContents(c),s.addRange(n);var w=document.execCommand("copy");if(!w)throw new Error("copy command was unsuccessful");u=!0}catch(d){o&&console.error("unable to copy using execCommand: ",d),o&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(e.format||"text",t),e.onCopy&&e.onCopy(window.clipboardData),u=!0}catch(v){o&&console.error("unable to copy using clipboardData: ",v),o&&console.error("falling back to prompt"),r=q("message"in e?e.message:j),window.prompt(r,t)}}finally{s&&(typeof s.removeRange=="function"?s.removeRange(n):s.removeAllRanges()),c&&document.body.removeChild(c),a()}return u}var G=z;const i=document.getElementById("image"),E=document.getElementById("canvas"),m=document.getElementById("offscreen"),b=document.getElementById("file"),g=document.getElementById("shadow-image"),B=document.getElementById("precision"),R=document.getElementById("shadow-gap"),A=document.getElementById("shadow-radius"),M=document.getElementById("drop-transparent"),O=document.getElementById("drop-white"),T=document.getElementById("drop-alpha"),K=document.getElementById("export"),h=E.getContext("2d"),$=m.getContext("2d");let F,f=640,l=50,x=0,y=0,I=!0,D=!1,C=!1;B.value=l+"";R.value=x+"";A.value=y+"";M.checked=I;O.checked=C;T.checked=D;var L;(L=document.getElementById("initial"))==null||L.addEventListener("click",()=>{b.click()});var S;(S=document.querySelector(".card-image"))==null||S.addEventListener("click",()=>{b.click()});b.addEventListener("change",t=>{const e=t.target.files;!(e!=null&&e.length)||(F=e[0],document.getElementById("initial").style.display="none",document.getElementById("app").style.display="flex",H())});B.addEventListener("change",t=>{l=+t.target.value,H()});R.addEventListener("change",t=>{x=+t.target.value,p()});A.addEventListener("change",t=>{y=+t.target.value,p()});M.addEventListener("change",t=>{I=t.target.checked,p()});O.addEventListener("change",t=>{C=t.target.checked,p()});T.addEventListener("change",t=>{D=t.target.checked,p()});const U=()=>{let t,e;return[new Promise((r,a)=>{t=r,e=a}),t,e]},X=t=>{const[e,o,r]=U(),a=new FileReader;return a.addEventListener("loadend",n=>{var s;(s=n.target)!=null&&s.result?o(n.target.result):r(new Error("Read file fail"))}),a.addEventListener("error",n=>{r(n)}),a.readAsDataURL(t),e},J=(t,e)=>{const[o,r,a]=U(),n=e!=null?e:new Image;return n.src=t,n.onload=()=>{r(n)},n.onerror=s=>{a(s)},o},H=async()=>{const t=await X(F);await J(t,i);const e=i.naturalHeight/i.naturalWidth;m.width=l,m.height=Math.round(l*e),E.width=f=Math.min(640,i.naturalHeight),E.height=f*e,$.drawImage(i,0,0,m.width,m.height),h.imageSmoothingEnabled=h.mozImageSmoothingEnabled=h.webkitImageSmoothingEnabled=h.msImageSmoothingEnabled=!1,h.drawImage(m,0,0,f,f*e),p()},p=()=>{const t=i.naturalHeight/i.naturalWidth,e=f/l|0;g.style.height=g.style.width=Math.max(e-x,1)+"px";const o=N(e);g.style.boxShadow=o||"none",g.parentElement.style.height=e*l*t+"px",g.parentElement.style.width=e*l+"px",g.style.borderRadius=y+"%"};function Q(t,e,o){if(t>255||e>255||o>255)throw"Invalid color component";return(t<<16|e<<8|o).toString(16)}const N=t=>{const e=[],o=i.naturalHeight/i.naturalWidth;for(let r=0;r<l*o;r++)for(let a=0;a<l;a++){const n=$.getImageData(a,r,1,1).data;if(I&&n[3]===0||C&&n[3]!==0&&n[0]===255&&n[1]===255&&n[2]===255)continue;const s=[...n];s.length=4;const c=D?"#"+("000000"+Q(n[0],n[1],n[2])).slice(-6):`rgba(${s.map((u,w)=>w===3?(u/255).toFixed(3):u).join(",")})`;e.push(`${c} ${a*t}px ${r*t}px`+(r===0&&a===0?` 0 ${t}px inset`:""))}return e.join(",")};K.addEventListener("click",()=>{const t=f/l|0,e=N(t);G(`
.mosaic {
    box-shadow: ${e};
    width: ${t}px;
    height: ${t}px;
    border-radius: ${y}%;
}
`),alert("\u5DF2\u590D\u5236\u5230\u526A\u5207\u677F")});
